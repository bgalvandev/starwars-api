{
  "openapi": "3.0.0",
  "info": {
    "title": "Star Wars People API",
    "description": "Esta API proporciona acceso a personajes de la saga Star Wars, permitiendo tanto su consulta desde una base de datos DynamoDB como la creación de nuevos personajes.\nUtiliza la API SWAPI como fuente de datos y está integrada con DynamoDB para la persistencia.\n\nEnlaces utiles:\n- [Repositorio Star Wars People API](https://github.com/bgalvandev/starwars-api.git)\n- [Fuente de datos SWAPI](https://swapi.dev/)\n",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Entorno de desarrollo local"
    },
    {
      "url": "https://{stage}.execute-api.{region}.amazonaws.com/{basePath}",
      "description": "Servidor en AWS (reemplaza {stage}, {region}, {basePath})"
    }
  ],
  "tags": [
    {
      "name": "Root",
      "description": "Rutas generales del sistema"
    },
    {
      "name": "People",
      "description": "Operaciones relacionadas con la entidad People (personajes)"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "tags": [
          "Root"
        ],
        "summary": "Obtener mensaje de bienvenida",
        "description": "Devuelve un mensaje de bienvenida que valida el estado del servidor y la conexión con DynamoDB.",
        "responses": {
          "200": {
            "description": "Mensaje de bienvenida recibido con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "¡Bienvenido a la API de personajes de Star Wars!"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/people": {
      "get": {
        "tags": [
          "People"
        ],
        "summary": "Listar todos los personajes",
        "description": "Devuelve un listado de personajes almacenados en DynamoDB. La respuesta está paginada y puedes solicitar diferentes páginas.",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Número de la página a consultar",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de personajes obtenida con éxito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "integer",
                      "description": "Total de personajes",
                      "example": 87
                    },
                    "next": {
                      "type": "string",
                      "description": "URL de la siguiente página (si existe)",
                      "example": "/people?page=2"
                    },
                    "previous": {
                      "type": "string",
                      "description": "URL de la página anterior (si existe)",
                      "example": null
                    },
                    "results": {
                      "type": "array",
                      "description": "Lista de personajes",
                      "items": {
                        "$ref": "#/components/schemas/Person"
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      },
      "post": {
        "tags": [
          "People"
        ],
        "summary": "Crear un nuevo personaje",
        "description": "Permite crear un nuevo personaje y almacenarlo en DynamoDB.",
        "requestBody": {
          "description": "Datos del personaje a crear",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PersonInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Personaje creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Personaje creado exitosamente"
                    },
                    "personaje": {
                      "$ref": "#/components/schemas/Person"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Solicitud incorrecta, datos inválidos"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/people/{id}": {
      "get": {
        "tags": [
          "People"
        ],
        "summary": "Obtener personaje por ID",
        "description": "Devuelve los detalles de un personaje específico almacenado en DynamoDB según su ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID único del personaje",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Personaje obtenido exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Person"
                }
              }
            }
          },
          "404": {
            "description": "Personaje no encontrado"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Person": {
        "type": "object",
        "description": "Estructura del personaje de Star Wars",
        "properties": {
          "id": {
            "type": "string",
            "description": "ID único del personaje en la base de datos",
            "example": "123"
          },
          "name": {
            "type": "string",
            "description": "Nombre completo del personaje",
            "example": "Luke Skywalker"
          },
          "height": {
            "type": "string",
            "description": "Altura del personaje (en cm)",
            "example": "172"
          },
          "mass": {
            "type": "string",
            "description": "Masa corporal del personaje (en kg)",
            "example": "77"
          },
          "hairColor": {
            "type": "string",
            "description": "Color de cabello",
            "example": "rubio"
          },
          "skinColor": {
            "type": "string",
            "description": "Color de piel",
            "example": "claro"
          },
          "eyeColor": {
            "type": "string",
            "description": "Color de ojos",
            "example": "azul"
          },
          "birthYear": {
            "type": "string",
            "description": "Año de nacimiento",
            "example": "19BBY"
          },
          "gender": {
            "type": "string",
            "description": "Género",
            "example": "masculino"
          },
          "homeworld": {
            "type": "string",
            "description": "Planeta natal del personaje",
            "example": "Tatooine"
          },
          "films": {
            "type": "array",
            "description": "Lista de películas en las que aparece el personaje",
            "items": {
              "type": "string"
            },
            "example": [
              "Star Wars: Episodio IV - Una nueva esperanza",
              "Star Wars: Episodio V - El imperio contraataca"
            ]
          }
        }
      },
      "PersonInput": {
        "type": "object",
        "description": "Datos necesarios para crear un nuevo personaje",
        "required": [
          "id",
          "name",
          "height"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "ID único del personaje",
            "example": "124"
          },
          "name": {
            "type": "string",
            "description": "Nombre completo del personaje",
            "example": "Darth Vader"
          },
          "height": {
            "type": "string",
            "description": "Altura del personaje (en cm)",
            "example": "202"
          },
          "mass": {
            "type": "string",
            "description": "Masa corporal del personaje (en kg)",
            "example": "136"
          },
          "hairColor": {
            "type": "string",
            "description": "Color de cabello (si aplica)",
            "example": "Ninguno"
          },
          "skinColor": {
            "type": "string",
            "description": "Color de piel",
            "example": "Claro"
          },
          "eyeColor": {
            "type": "string",
            "description": "Color de ojos",
            "example": "Amarillo"
          },
          "birthYear": {
            "type": "string",
            "description": "Año de nacimiento",
            "example": "41.9BBY"
          },
          "gender": {
            "type": "string",
            "description": "Género",
            "example": "masculino"
          },
          "homeworld": {
            "type": "string",
            "description": "Planeta natal",
            "example": "Tatooine"
          },
          "films": {
            "type": "array",
            "description": "Lista de películas en las que aparece el personaje",
            "items": {
              "type": "string"
            },
            "example": [
              "Star Wars: Episodio IV - Una nueva esperanza",
              "Star Wars: Episodio V - El imperio contraataca"
            ]
          }
        }
      }
    },
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-KEY"
      }
    }
  }
}